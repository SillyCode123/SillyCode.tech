{"ast":null,"code":"'use strict';\n\nconst DataManager = require('./DataManager');\n\n/**\n * Manages the API methods of a data model with a mutable cache of instances.\n * @extends {DataManager}\n * @abstract\n */\nclass CachedManager extends DataManager {\n  constructor(client, holds, iterable) {\n    super(client, holds);\n    Object.defineProperty(this, '_cache', {\n      value: this.client.options.makeCache(this.constructor, this.holds)\n    });\n    if (iterable) {\n      for (const item of iterable) {\n        this._add(item);\n      }\n    }\n  }\n\n  /**\n   * The cache of items for this manager.\n   * @type {Collection}\n   * @abstract\n   */\n  get cache() {\n    return this._cache;\n  }\n  _add(data) {\n    let cache = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    let {\n      id,\n      extras = []\n    } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const existing = this.cache.get(id ?? data.id);\n    if (existing) {\n      if (cache) {\n        existing._patch(data);\n        return existing;\n      }\n      const clone = existing._clone();\n      clone._patch(data);\n      return clone;\n    }\n    const entry = this.holds ? new this.holds(this.client, data, ...extras) : data;\n    if (cache) this.cache.set(id ?? entry.id, entry);\n    return entry;\n  }\n}\nmodule.exports = CachedManager;","map":{"version":3,"names":["DataManager","require","CachedManager","constructor","client","holds","iterable","Object","defineProperty","value","options","makeCache","item","_add","cache","_cache","data","id","extras","existing","get","_patch","clone","_clone","entry","set","module","exports"],"sources":["J:/Coding/Projekts/Web/JavaScript/sillcode.tech/node_modules/discord.js/src/managers/CachedManager.js"],"sourcesContent":["'use strict';\n\nconst DataManager = require('./DataManager');\n\n/**\n * Manages the API methods of a data model with a mutable cache of instances.\n * @extends {DataManager}\n * @abstract\n */\nclass CachedManager extends DataManager {\n  constructor(client, holds, iterable) {\n    super(client, holds);\n\n    Object.defineProperty(this, '_cache', { value: this.client.options.makeCache(this.constructor, this.holds) });\n\n    if (iterable) {\n      for (const item of iterable) {\n        this._add(item);\n      }\n    }\n  }\n\n  /**\n   * The cache of items for this manager.\n   * @type {Collection}\n   * @abstract\n   */\n  get cache() {\n    return this._cache;\n  }\n\n  _add(data, cache = true, { id, extras = [] } = {}) {\n    const existing = this.cache.get(id ?? data.id);\n    if (existing) {\n      if (cache) {\n        existing._patch(data);\n        return existing;\n      }\n      const clone = existing._clone();\n      clone._patch(data);\n      return clone;\n    }\n\n    const entry = this.holds ? new this.holds(this.client, data, ...extras) : data;\n    if (cache) this.cache.set(id ?? entry.id, entry);\n    return entry;\n  }\n}\n\nmodule.exports = CachedManager;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,WAAW,GAAGC,OAAO,CAAC,eAAe,CAAC;;AAE5C;AACA;AACA;AACA;AACA;AACA,MAAMC,aAAa,SAASF,WAAW,CAAC;EACtCG,WAAW,CAACC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAE;IACnC,KAAK,CAACF,MAAM,EAAEC,KAAK,CAAC;IAEpBE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE;MAAEC,KAAK,EAAE,IAAI,CAACL,MAAM,CAACM,OAAO,CAACC,SAAS,CAAC,IAAI,CAACR,WAAW,EAAE,IAAI,CAACE,KAAK;IAAE,CAAC,CAAC;IAE7G,IAAIC,QAAQ,EAAE;MACZ,KAAK,MAAMM,IAAI,IAAIN,QAAQ,EAAE;QAC3B,IAAI,CAACO,IAAI,CAACD,IAAI,CAAC;MACjB;IACF;EACF;;EAEA;AACF;AACA;AACA;AACA;EACE,IAAIE,KAAK,GAAG;IACV,OAAO,IAAI,CAACC,MAAM;EACpB;EAEAF,IAAI,CAACG,IAAI,EAA0C;IAAA,IAAxCF,KAAK,uEAAG,IAAI;IAAA,IAAE;MAAEG,EAAE;MAAEC,MAAM,GAAG;IAAG,CAAC,uEAAG,CAAC,CAAC;IAC/C,MAAMC,QAAQ,GAAG,IAAI,CAACL,KAAK,CAACM,GAAG,CAACH,EAAE,IAAID,IAAI,CAACC,EAAE,CAAC;IAC9C,IAAIE,QAAQ,EAAE;MACZ,IAAIL,KAAK,EAAE;QACTK,QAAQ,CAACE,MAAM,CAACL,IAAI,CAAC;QACrB,OAAOG,QAAQ;MACjB;MACA,MAAMG,KAAK,GAAGH,QAAQ,CAACI,MAAM,EAAE;MAC/BD,KAAK,CAACD,MAAM,CAACL,IAAI,CAAC;MAClB,OAAOM,KAAK;IACd;IAEA,MAAME,KAAK,GAAG,IAAI,CAACnB,KAAK,GAAG,IAAI,IAAI,CAACA,KAAK,CAAC,IAAI,CAACD,MAAM,EAAEY,IAAI,EAAE,GAAGE,MAAM,CAAC,GAAGF,IAAI;IAC9E,IAAIF,KAAK,EAAE,IAAI,CAACA,KAAK,CAACW,GAAG,CAACR,EAAE,IAAIO,KAAK,CAACP,EAAE,EAAEO,KAAK,CAAC;IAChD,OAAOA,KAAK;EACd;AACF;AAEAE,MAAM,CAACC,OAAO,GAAGzB,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}