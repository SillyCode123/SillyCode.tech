{"ast":null,"code":"'use strict';\n\nconst {\n  GatewayOpcodes\n} = require('discord-api-types/v10');\nconst {\n  Presence\n} = require('./Presence');\nconst {\n  DiscordjsTypeError,\n  ErrorCodes\n} = require('../errors');\n\n/**\n * Represents the client's presence.\n * @extends {Presence}\n */\nclass ClientPresence extends Presence {\n  constructor(client) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(client, Object.assign(data, {\n      status: data.status ?? 'online',\n      user: {\n        id: null\n      }\n    }));\n  }\n\n  /**\n   * Sets the client's presence\n   * @param {PresenceData} presence The data to set the presence to\n   * @returns {ClientPresence}\n   */\n  set(presence) {\n    const packet = this._parse(presence);\n    this._patch(packet);\n    if (typeof presence.shardId === 'undefined') {\n      this.client.ws.broadcast({\n        op: GatewayOpcodes.PresenceUpdate,\n        d: packet\n      });\n    } else if (Array.isArray(presence.shardId)) {\n      for (const shardId of presence.shardId) {\n        this.client.ws.shards.get(shardId).send({\n          op: GatewayOpcodes.PresenceUpdate,\n          d: packet\n        });\n      }\n    } else {\n      this.client.ws.shards.get(presence.shardId).send({\n        op: GatewayOpcodes.PresenceUpdate,\n        d: packet\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Parses presence data into a packet ready to be sent to Discord\n   * @param {PresenceData} presence The data to parse\n   * @returns {APIPresence}\n   * @private\n   */\n  _parse(_ref) {\n    let {\n      status,\n      since,\n      afk,\n      activities\n    } = _ref;\n    const data = {\n      activities: [],\n      afk: typeof afk === 'boolean' ? afk : false,\n      since: typeof since === 'number' && !Number.isNaN(since) ? since : null,\n      status: status ?? this.status\n    };\n    if (activities?.length) {\n      for (const [i, activity] of activities.entries()) {\n        if (typeof activity.name !== 'string') {\n          throw new DiscordjsTypeError(ErrorCodes.InvalidType, `activities[${i}].name`, 'string');\n        }\n        activity.type ??= 0;\n        data.activities.push({\n          type: activity.type,\n          name: activity.name,\n          url: activity.url\n        });\n      }\n    } else if (!activities && (status || afk || since) && this.activities.length) {\n      data.activities.push(...this.activities.map(a => ({\n        name: a.name,\n        type: a.type,\n        url: a.url ?? undefined\n      })));\n    }\n    return data;\n  }\n}\nmodule.exports = ClientPresence;\n\n/* eslint-disable max-len */\n/**\n * @external APIPresence\n * @see {@link https://discord.com/developers/docs/rich-presence/how-to#updating-presence-update-presence-payload-fields}\n */","map":{"version":3,"names":["GatewayOpcodes","require","Presence","DiscordjsTypeError","ErrorCodes","ClientPresence","constructor","client","data","Object","assign","status","user","id","set","presence","packet","_parse","_patch","shardId","ws","broadcast","op","PresenceUpdate","d","Array","isArray","shards","get","send","since","afk","activities","Number","isNaN","length","i","activity","entries","name","InvalidType","type","push","url","map","a","undefined","module","exports"],"sources":["J:/Coding/Projekts/Web/JavaScript/sillcode.tech/node_modules/discord.js/src/structures/ClientPresence.js"],"sourcesContent":["'use strict';\n\nconst { GatewayOpcodes } = require('discord-api-types/v10');\nconst { Presence } = require('./Presence');\nconst { DiscordjsTypeError, ErrorCodes } = require('../errors');\n\n/**\n * Represents the client's presence.\n * @extends {Presence}\n */\nclass ClientPresence extends Presence {\n  constructor(client, data = {}) {\n    super(client, Object.assign(data, { status: data.status ?? 'online', user: { id: null } }));\n  }\n\n  /**\n   * Sets the client's presence\n   * @param {PresenceData} presence The data to set the presence to\n   * @returns {ClientPresence}\n   */\n  set(presence) {\n    const packet = this._parse(presence);\n    this._patch(packet);\n    if (typeof presence.shardId === 'undefined') {\n      this.client.ws.broadcast({ op: GatewayOpcodes.PresenceUpdate, d: packet });\n    } else if (Array.isArray(presence.shardId)) {\n      for (const shardId of presence.shardId) {\n        this.client.ws.shards.get(shardId).send({ op: GatewayOpcodes.PresenceUpdate, d: packet });\n      }\n    } else {\n      this.client.ws.shards.get(presence.shardId).send({ op: GatewayOpcodes.PresenceUpdate, d: packet });\n    }\n    return this;\n  }\n\n  /**\n   * Parses presence data into a packet ready to be sent to Discord\n   * @param {PresenceData} presence The data to parse\n   * @returns {APIPresence}\n   * @private\n   */\n  _parse({ status, since, afk, activities }) {\n    const data = {\n      activities: [],\n      afk: typeof afk === 'boolean' ? afk : false,\n      since: typeof since === 'number' && !Number.isNaN(since) ? since : null,\n      status: status ?? this.status,\n    };\n    if (activities?.length) {\n      for (const [i, activity] of activities.entries()) {\n        if (typeof activity.name !== 'string') {\n          throw new DiscordjsTypeError(ErrorCodes.InvalidType, `activities[${i}].name`, 'string');\n        }\n        activity.type ??= 0;\n\n        data.activities.push({\n          type: activity.type,\n          name: activity.name,\n          url: activity.url,\n        });\n      }\n    } else if (!activities && (status || afk || since) && this.activities.length) {\n      data.activities.push(\n        ...this.activities.map(a => ({\n          name: a.name,\n          type: a.type,\n          url: a.url ?? undefined,\n        })),\n      );\n    }\n\n    return data;\n  }\n}\n\nmodule.exports = ClientPresence;\n\n/* eslint-disable max-len */\n/**\n * @external APIPresence\n * @see {@link https://discord.com/developers/docs/rich-presence/how-to#updating-presence-update-presence-payload-fields}\n */\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}