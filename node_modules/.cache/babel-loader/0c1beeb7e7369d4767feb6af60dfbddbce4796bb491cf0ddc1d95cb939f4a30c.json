{"ast":null,"code":"'use strict';\n\nconst Action = require('./Action');\nconst Events = require('../../util/Events');\nclass PresenceUpdateAction extends Action {\n  handle(data) {\n    let user = this.client.users.cache.get(data.user.id);\n    if (!user && data.user.username) user = this.client.users._add(data.user);\n    if (!user) return;\n    if (data.user.username) {\n      if (!user._equals(data.user)) this.client.actions.UserUpdate.handle(data.user);\n    }\n    const guild = this.client.guilds.cache.get(data.guild_id);\n    if (!guild) return;\n    const oldPresence = guild.presences.cache.get(user.id)?._clone() ?? null;\n    let member = guild.members.cache.get(user.id);\n    if (!member && data.status !== 'offline') {\n      member = guild.members._add({\n        user,\n        deaf: false,\n        mute: false\n      });\n      this.client.emit(Events.GuildMemberAvailable, member);\n    }\n    const newPresence = guild.presences._add(Object.assign(data, {\n      guild\n    }));\n    if (this.client.listenerCount(Events.PresenceUpdate) && !newPresence.equals(oldPresence)) {\n      /**\n       * Emitted whenever a guild member's presence (e.g. status, activity) is changed.\n       * @event Client#presenceUpdate\n       * @param {?Presence} oldPresence The presence before the update, if one at all\n       * @param {Presence} newPresence The presence after the update\n       */\n      this.client.emit(Events.PresenceUpdate, oldPresence, newPresence);\n    }\n  }\n}\nmodule.exports = PresenceUpdateAction;","map":{"version":3,"names":["Action","require","Events","PresenceUpdateAction","handle","data","user","client","users","cache","get","id","username","_add","_equals","actions","UserUpdate","guild","guilds","guild_id","oldPresence","presences","_clone","member","members","status","deaf","mute","emit","GuildMemberAvailable","newPresence","Object","assign","listenerCount","PresenceUpdate","equals","module","exports"],"sources":["J:/Coding/Projekts/Web/JavaScript/sillcode.tech/node_modules/discord.js/src/client/actions/PresenceUpdate.js"],"sourcesContent":["'use strict';\n\nconst Action = require('./Action');\nconst Events = require('../../util/Events');\n\nclass PresenceUpdateAction extends Action {\n  handle(data) {\n    let user = this.client.users.cache.get(data.user.id);\n    if (!user && data.user.username) user = this.client.users._add(data.user);\n    if (!user) return;\n\n    if (data.user.username) {\n      if (!user._equals(data.user)) this.client.actions.UserUpdate.handle(data.user);\n    }\n\n    const guild = this.client.guilds.cache.get(data.guild_id);\n    if (!guild) return;\n\n    const oldPresence = guild.presences.cache.get(user.id)?._clone() ?? null;\n    let member = guild.members.cache.get(user.id);\n    if (!member && data.status !== 'offline') {\n      member = guild.members._add({\n        user,\n        deaf: false,\n        mute: false,\n      });\n      this.client.emit(Events.GuildMemberAvailable, member);\n    }\n    const newPresence = guild.presences._add(Object.assign(data, { guild }));\n    if (this.client.listenerCount(Events.PresenceUpdate) && !newPresence.equals(oldPresence)) {\n      /**\n       * Emitted whenever a guild member's presence (e.g. status, activity) is changed.\n       * @event Client#presenceUpdate\n       * @param {?Presence} oldPresence The presence before the update, if one at all\n       * @param {Presence} newPresence The presence after the update\n       */\n      this.client.emit(Events.PresenceUpdate, oldPresence, newPresence);\n    }\n  }\n}\n\nmodule.exports = PresenceUpdateAction;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,MAAM,GAAGC,OAAO,CAAC,UAAU,CAAC;AAClC,MAAMC,MAAM,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AAE3C,MAAME,oBAAoB,SAASH,MAAM,CAAC;EACxCI,MAAM,CAACC,IAAI,EAAE;IACX,IAAIC,IAAI,GAAG,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,KAAK,CAACC,GAAG,CAACL,IAAI,CAACC,IAAI,CAACK,EAAE,CAAC;IACpD,IAAI,CAACL,IAAI,IAAID,IAAI,CAACC,IAAI,CAACM,QAAQ,EAAEN,IAAI,GAAG,IAAI,CAACC,MAAM,CAACC,KAAK,CAACK,IAAI,CAACR,IAAI,CAACC,IAAI,CAAC;IACzE,IAAI,CAACA,IAAI,EAAE;IAEX,IAAID,IAAI,CAACC,IAAI,CAACM,QAAQ,EAAE;MACtB,IAAI,CAACN,IAAI,CAACQ,OAAO,CAACT,IAAI,CAACC,IAAI,CAAC,EAAE,IAAI,CAACC,MAAM,CAACQ,OAAO,CAACC,UAAU,CAACZ,MAAM,CAACC,IAAI,CAACC,IAAI,CAAC;IAChF;IAEA,MAAMW,KAAK,GAAG,IAAI,CAACV,MAAM,CAACW,MAAM,CAACT,KAAK,CAACC,GAAG,CAACL,IAAI,CAACc,QAAQ,CAAC;IACzD,IAAI,CAACF,KAAK,EAAE;IAEZ,MAAMG,WAAW,GAAGH,KAAK,CAACI,SAAS,CAACZ,KAAK,CAACC,GAAG,CAACJ,IAAI,CAACK,EAAE,CAAC,EAAEW,MAAM,EAAE,IAAI,IAAI;IACxE,IAAIC,MAAM,GAAGN,KAAK,CAACO,OAAO,CAACf,KAAK,CAACC,GAAG,CAACJ,IAAI,CAACK,EAAE,CAAC;IAC7C,IAAI,CAACY,MAAM,IAAIlB,IAAI,CAACoB,MAAM,KAAK,SAAS,EAAE;MACxCF,MAAM,GAAGN,KAAK,CAACO,OAAO,CAACX,IAAI,CAAC;QAC1BP,IAAI;QACJoB,IAAI,EAAE,KAAK;QACXC,IAAI,EAAE;MACR,CAAC,CAAC;MACF,IAAI,CAACpB,MAAM,CAACqB,IAAI,CAAC1B,MAAM,CAAC2B,oBAAoB,EAAEN,MAAM,CAAC;IACvD;IACA,MAAMO,WAAW,GAAGb,KAAK,CAACI,SAAS,CAACR,IAAI,CAACkB,MAAM,CAACC,MAAM,CAAC3B,IAAI,EAAE;MAAEY;IAAM,CAAC,CAAC,CAAC;IACxE,IAAI,IAAI,CAACV,MAAM,CAAC0B,aAAa,CAAC/B,MAAM,CAACgC,cAAc,CAAC,IAAI,CAACJ,WAAW,CAACK,MAAM,CAACf,WAAW,CAAC,EAAE;MACxF;AACN;AACA;AACA;AACA;AACA;MACM,IAAI,CAACb,MAAM,CAACqB,IAAI,CAAC1B,MAAM,CAACgC,cAAc,EAAEd,WAAW,EAAEU,WAAW,CAAC;IACnE;EACF;AACF;AAEAM,MAAM,CAACC,OAAO,GAAGlC,oBAAoB"},"metadata":{},"sourceType":"script","externalDependencies":[]}