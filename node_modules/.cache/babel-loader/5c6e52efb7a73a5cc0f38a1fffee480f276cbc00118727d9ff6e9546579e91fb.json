{"ast":null,"code":"'use strict';\n\nconst Errors = require('./misc/errors');\nconst {\n  Status\n} = require('./const/connection_status');\nconst Query = require('./cmd/query');\nconst CommandParameter = require('./command-parameter');\nclass ConnectionCallback {\n  #conn;\n  constructor(conn) {\n    this.#conn = conn;\n    this.on = this.#conn.on.bind(this.#conn);\n    this.once = this.#conn.once.bind(this.#conn);\n  }\n  get threadId() {\n    return this.#conn.info ? this.#conn.info.threadId : null;\n  }\n  get info() {\n    return this.#conn.info;\n  }\n  #noop = () => {};\n  release = cb => {\n    this.#conn.release(() => {\n      if (cb) cb();\n    });\n  };\n\n  /**\n   * Permit to change user during connection.\n   * All user variables will be reset, Prepare commands will be released.\n   * !!! mysql has a bug when CONNECT_ATTRS capability is set, that is default !!!!\n   *\n   * @param options   connection options\n   * @param callback  callback function\n   */\n  changeUser(options, callback) {\n    let _options, _cb;\n    if (typeof options === 'function') {\n      _cb = options;\n      _options = undefined;\n    } else {\n      _options = options;\n      _cb = callback;\n    }\n    const cmdParam = new CommandParameter(null, null, _options, _cb);\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    new Promise(this.#conn.changeUser.bind(this.#conn, cmdParam)).then(() => {\n      if (cmdParam.callback) cmdParam.callback(null, null, null);\n    }).catch(cmdParam.callback || this.#noop);\n  }\n\n  /**\n   * Start transaction\n   *\n   * @param callback  callback function\n   */\n  beginTransaction(callback) {\n    this.query(new CommandParameter('START TRANSACTION'), null, callback);\n  }\n\n  /**\n   * Commit a transaction.\n   *\n   * @param callback  callback function\n   */\n  commit(callback) {\n    this.#conn.changeTransaction(new CommandParameter('COMMIT'), () => {\n      if (callback) callback(null, null, null);\n    }, callback || this.#noop);\n  }\n\n  /**\n   * Roll back a transaction.\n   *\n   * @param callback  callback function\n   */\n  rollback(callback) {\n    this.#conn.changeTransaction(new CommandParameter('ROLLBACK'), () => {\n      if (callback) callback(null, null, null);\n    }, callback || this.#noop);\n  }\n\n  /**\n   * Execute query using text protocol with callback emit columns/data/end/error\n   * events to permit streaming big result-set\n   *\n   * @param sql     sql parameter Object can be used to supersede default option.\n   *                Object must then have sql property.\n   * @param values  object / array of placeholder values (not mandatory)\n   * @param callback  callback function\n   */\n  query(sql, values, callback) {\n    const cmdParam = ConnectionCallback._PARAM(this.#conn.opts, sql, values, callback);\n    return ConnectionCallback._QUERY_CMD(this.#conn, cmdParam);\n  }\n  static _QUERY_CMD(conn, cmdParam) {\n    let cmd;\n    if (cmdParam.callback) {\n      cmdParam.opts = cmdParam.opts ? Object.assign(cmdParam.opts, {\n        metaAsArray: true\n      }) : {\n        metaAsArray: true\n      };\n      cmd = new Query(_ref => {\n        let [rows, meta] = _ref;\n        cmdParam.callback(null, rows, meta);\n      }, cmdParam.callback, conn.opts, cmdParam);\n    } else {\n      cmd = new Query(() => {}, () => {}, conn.opts, cmdParam);\n    }\n    cmd.handleNewRows = row => {\n      cmd._rows[cmd._responseIndex].push(row);\n      cmd.emit('data', row);\n    };\n    conn.addCommand(cmd);\n    return cmd;\n  }\n  execute(sql, values, callback) {\n    const cmdParam = ConnectionCallback._PARAM(this.#conn.opts, sql, values, callback);\n    return ConnectionCallback._EXECUTE_CMD(this.#conn, cmdParam);\n  }\n  static _PARAM(options, sql, values, callback) {\n    let _cmdOpt,\n      _sql,\n      _values = values,\n      _cb = callback;\n    if (typeof values === 'function') {\n      _cb = values;\n      _values = undefined;\n    }\n    if (typeof sql === 'object') {\n      _cmdOpt = sql;\n      _sql = _cmdOpt.sql;\n      if (_cmdOpt.values) _values = _cmdOpt.values;\n    } else {\n      _sql = sql;\n    }\n    const cmdParam = new CommandParameter(_sql, _values, _cmdOpt, _cb);\n    if (options.trace) Error.captureStackTrace(cmdParam);\n    return cmdParam;\n  }\n  static _EXECUTE_CMD(conn, cmdParam) {\n    new Promise(conn.prepare.bind(conn, cmdParam)).then(prepare => {\n      const opts = cmdParam.opts ? Object.assign(cmdParam.opts, {\n        metaAsArray: true\n      }) : {\n        metaAsArray: true\n      };\n      return prepare.execute(cmdParam.values, opts, null, cmdParam.stack).then(_ref2 => {\n        let [rows, meta] = _ref2;\n        if (cmdParam.callback) {\n          cmdParam.callback(null, rows, meta);\n        }\n      }).finally(() => prepare.close());\n    }).catch(err => {\n      if (conn.opts.logger.error) conn.opts.logger.error(err);\n      if (cmdParam.callback) cmdParam.callback(err);\n    });\n  }\n  prepare(sql, callback) {\n    let _cmdOpt, _sql;\n    if (typeof sql === 'object') {\n      _cmdOpt = sql;\n      _sql = _cmdOpt.sql;\n    } else {\n      _sql = sql;\n    }\n    const cmdParam = new CommandParameter(_sql, null, _cmdOpt, callback);\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    return new Promise(this.#conn.prepare.bind(this.#conn, cmdParam)).then(prepare => {\n      if (callback) callback(null, prepare, null);\n    }).catch(callback || this.#noop);\n  }\n\n  /**\n   * Execute a batch\n   * events to permit streaming big result-set\n   *\n   * @param sql     sql parameter Object can be used to supersede default option.\n   *                Object must then have sql property.\n   * @param values  object / array of placeholder values (not mandatory)\n   * @param callback callback\n   */\n  batch(sql, values, callback) {\n    const cmdParam = ConnectionCallback._PARAM(this.#conn.opts, sql, values, callback);\n    return ConnectionCallback._BATCH_CMD(this.#conn, cmdParam);\n  }\n  static _BATCH_CMD(conn, cmdParam) {\n    conn.batch(cmdParam).then(res => {\n      if (cmdParam.callback) cmdParam.callback(null, res);\n    }).catch(err => {\n      if (cmdParam.callback) cmdParam.callback(err);\n    });\n  }\n\n  /**\n   * Send an empty MySQL packet to ensure connection is active, and reset @@wait_timeout\n   * @param timeout (optional) timeout value in ms. If reached, throw error and close connection\n   * @param callback callback\n   */\n  ping(timeout, callback) {\n    let _cmdOpt = {},\n      _cb;\n    if (typeof timeout === 'function') {\n      _cb = timeout;\n    } else {\n      _cmdOpt.timeout = timeout;\n      _cb = callback;\n    }\n    const cmdParam = new CommandParameter(null, null, _cmdOpt, _cb);\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    new Promise(this.#conn.ping.bind(this.#conn, cmdParam)).then(_cb || this.#noop).catch(_cb || this.#noop);\n  }\n\n  /**\n   * Send a reset command that will\n   * - rollback any open transaction\n   * - reset transaction isolation level\n   * - reset session variables\n   * - delete user variables\n   * - remove temporary tables\n   * - remove all PREPARE statement\n   *\n   * @param callback callback\n   */\n  reset(callback) {\n    const cmdParam = new CommandParameter();\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    return new Promise(this.#conn.reset.bind(this.#conn, cmdParam)).then(callback || this.#noop).catch(callback || this.#noop);\n  }\n\n  /**\n   * Indicates the state of the connection as the driver knows it\n   * @returns {boolean}\n   */\n  isValid() {\n    return this.#conn.isValid();\n  }\n\n  /**\n   * Terminate connection gracefully.\n   *\n   * @param callback callback\n   */\n  end(callback) {\n    const cmdParam = new CommandParameter();\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    new Promise(this.#conn.end.bind(this.#conn, cmdParam)).then(() => {\n      if (callback) callback();\n    }).catch(callback || this.#noop);\n  }\n\n  /**\n   * Alias for destroy.\n   */\n  close() {\n    this.destroy();\n  }\n\n  /**\n   * Force connection termination by closing the underlying socket and killing server process if any.\n   */\n  destroy() {\n    this.#conn.destroy();\n  }\n  pause() {\n    this.#conn.pause();\n  }\n  resume() {\n    this.#conn.resume();\n  }\n  format(sql, values) {\n    this.#conn.format(sql, values);\n  }\n\n  /**\n   * return current connected server version information.\n   *\n   * @returns {*}\n   */\n  serverVersion() {\n    return this.#conn.serverVersion();\n  }\n\n  /**\n   * Change option \"debug\" during connection.\n   * @param val   debug value\n   */\n  debug(val) {\n    return this.#conn.debug(val);\n  }\n  debugCompress(val) {\n    return this.#conn.debugCompress(val);\n  }\n  escape(val) {\n    return this.#conn.escape(val);\n  }\n  escapeId(val) {\n    return this.#conn.escapeId(val);\n  }\n\n  //*****************************************************************\n  // internal public testing methods\n  //*****************************************************************\n\n  get __tests() {\n    return this.#conn.__tests;\n  }\n  connect(callback) {\n    if (!callback) {\n      throw new Errors.createError('missing mandatory callback parameter', Errors.ER_MISSING_PARAMETER, this.#conn.info);\n    }\n    switch (this.#conn.status) {\n      case Status.NOT_CONNECTED:\n      case Status.CONNECTING:\n      case Status.AUTHENTICATING:\n      case Status.INIT_CMD:\n        this.once('connect', callback);\n        break;\n      case Status.CONNECTED:\n        callback.call(this);\n        break;\n      case Status.CLOSING:\n      case Status.CLOSED:\n        callback.call(this, Errors.createError('Connection closed', Errors.ER_CONNECTION_ALREADY_CLOSED, this.#conn.info, '08S01', null, true));\n        break;\n    }\n  }\n}\nmodule.exports = ConnectionCallback;","map":{"version":3,"names":["Errors","require","Status","Query","CommandParameter","ConnectionCallback","conn","constructor","on","bind","once","threadId","info","noop","release","cb","changeUser","options","callback","_options","_cb","undefined","cmdParam","opts","trace","Error","captureStackTrace","Promise","then","catch","beginTransaction","query","commit","changeTransaction","rollback","sql","values","_PARAM","_QUERY_CMD","cmd","Object","assign","metaAsArray","rows","meta","handleNewRows","row","_rows","_responseIndex","push","emit","addCommand","execute","_EXECUTE_CMD","_cmdOpt","_sql","_values","prepare","stack","finally","close","err","logger","error","batch","_BATCH_CMD","res","ping","timeout","reset","isValid","end","destroy","pause","resume","format","serverVersion","debug","val","debugCompress","escape","escapeId","__tests","connect","createError","ER_MISSING_PARAMETER","status","NOT_CONNECTED","CONNECTING","AUTHENTICATING","INIT_CMD","CONNECTED","call","CLOSING","CLOSED","ER_CONNECTION_ALREADY_CLOSED","module","exports"],"sources":["J:/Coding/Projekts/Web/JavaScript/sillcode.tech/node_modules/mariadb/lib/connection-callback.js"],"sourcesContent":["'use strict';\n\nconst Errors = require('./misc/errors');\nconst { Status } = require('./const/connection_status');\nconst Query = require('./cmd/query');\nconst CommandParameter = require('./command-parameter');\n\nclass ConnectionCallback {\n  #conn;\n\n  constructor(conn) {\n    this.#conn = conn;\n    this.on = this.#conn.on.bind(this.#conn);\n    this.once = this.#conn.once.bind(this.#conn);\n  }\n\n  get threadId() {\n    return this.#conn.info ? this.#conn.info.threadId : null;\n  }\n\n  get info() {\n    return this.#conn.info;\n  }\n\n  #noop = () => {};\n\n  release = (cb) => {\n    this.#conn.release(() => {\n      if (cb) cb();\n    });\n  };\n\n  /**\n   * Permit to change user during connection.\n   * All user variables will be reset, Prepare commands will be released.\n   * !!! mysql has a bug when CONNECT_ATTRS capability is set, that is default !!!!\n   *\n   * @param options   connection options\n   * @param callback  callback function\n   */\n  changeUser(options, callback) {\n    let _options, _cb;\n    if (typeof options === 'function') {\n      _cb = options;\n      _options = undefined;\n    } else {\n      _options = options;\n      _cb = callback;\n    }\n    const cmdParam = new CommandParameter(null, null, _options, _cb);\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n\n    new Promise(this.#conn.changeUser.bind(this.#conn, cmdParam))\n      .then(() => {\n        if (cmdParam.callback) cmdParam.callback(null, null, null);\n      })\n      .catch(cmdParam.callback || this.#noop);\n  }\n\n  /**\n   * Start transaction\n   *\n   * @param callback  callback function\n   */\n  beginTransaction(callback) {\n    this.query(new CommandParameter('START TRANSACTION'), null, callback);\n  }\n\n  /**\n   * Commit a transaction.\n   *\n   * @param callback  callback function\n   */\n  commit(callback) {\n    this.#conn.changeTransaction(\n      new CommandParameter('COMMIT'),\n      () => {\n        if (callback) callback(null, null, null);\n      },\n      callback || this.#noop\n    );\n  }\n\n  /**\n   * Roll back a transaction.\n   *\n   * @param callback  callback function\n   */\n  rollback(callback) {\n    this.#conn.changeTransaction(\n      new CommandParameter('ROLLBACK'),\n      () => {\n        if (callback) callback(null, null, null);\n      },\n      callback || this.#noop\n    );\n  }\n\n  /**\n   * Execute query using text protocol with callback emit columns/data/end/error\n   * events to permit streaming big result-set\n   *\n   * @param sql     sql parameter Object can be used to supersede default option.\n   *                Object must then have sql property.\n   * @param values  object / array of placeholder values (not mandatory)\n   * @param callback  callback function\n   */\n  query(sql, values, callback) {\n    const cmdParam = ConnectionCallback._PARAM(this.#conn.opts, sql, values, callback);\n    return ConnectionCallback._QUERY_CMD(this.#conn, cmdParam);\n  }\n\n  static _QUERY_CMD(conn, cmdParam) {\n    let cmd;\n    if (cmdParam.callback) {\n      cmdParam.opts = cmdParam.opts ? Object.assign(cmdParam.opts, { metaAsArray: true }) : { metaAsArray: true };\n      cmd = new Query(\n        ([rows, meta]) => {\n          cmdParam.callback(null, rows, meta);\n        },\n        cmdParam.callback,\n        conn.opts,\n        cmdParam\n      );\n    } else {\n      cmd = new Query(\n        () => {},\n        () => {},\n        conn.opts,\n        cmdParam\n      );\n    }\n\n    cmd.handleNewRows = (row) => {\n      cmd._rows[cmd._responseIndex].push(row);\n      cmd.emit('data', row);\n    };\n\n    conn.addCommand(cmd);\n    return cmd;\n  }\n\n  execute(sql, values, callback) {\n    const cmdParam = ConnectionCallback._PARAM(this.#conn.opts, sql, values, callback);\n    return ConnectionCallback._EXECUTE_CMD(this.#conn, cmdParam);\n  }\n\n  static _PARAM(options, sql, values, callback) {\n    let _cmdOpt,\n      _sql,\n      _values = values,\n      _cb = callback;\n    if (typeof values === 'function') {\n      _cb = values;\n      _values = undefined;\n    }\n    if (typeof sql === 'object') {\n      _cmdOpt = sql;\n      _sql = _cmdOpt.sql;\n      if (_cmdOpt.values) _values = _cmdOpt.values;\n    } else {\n      _sql = sql;\n    }\n    const cmdParam = new CommandParameter(_sql, _values, _cmdOpt, _cb);\n    if (options.trace) Error.captureStackTrace(cmdParam);\n    return cmdParam;\n  }\n\n  static _EXECUTE_CMD(conn, cmdParam) {\n    new Promise(conn.prepare.bind(conn, cmdParam))\n      .then((prepare) => {\n        const opts = cmdParam.opts ? Object.assign(cmdParam.opts, { metaAsArray: true }) : { metaAsArray: true };\n        return prepare\n          .execute(cmdParam.values, opts, null, cmdParam.stack)\n          .then(([rows, meta]) => {\n            if (cmdParam.callback) {\n              cmdParam.callback(null, rows, meta);\n            }\n          })\n          .finally(() => prepare.close());\n      })\n      .catch((err) => {\n        if (conn.opts.logger.error) conn.opts.logger.error(err);\n        if (cmdParam.callback) cmdParam.callback(err);\n      });\n  }\n\n  prepare(sql, callback) {\n    let _cmdOpt, _sql;\n    if (typeof sql === 'object') {\n      _cmdOpt = sql;\n      _sql = _cmdOpt.sql;\n    } else {\n      _sql = sql;\n    }\n    const cmdParam = new CommandParameter(_sql, null, _cmdOpt, callback);\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    return new Promise(this.#conn.prepare.bind(this.#conn, cmdParam))\n      .then((prepare) => {\n        if (callback) callback(null, prepare, null);\n      })\n      .catch(callback || this.#noop);\n  }\n\n  /**\n   * Execute a batch\n   * events to permit streaming big result-set\n   *\n   * @param sql     sql parameter Object can be used to supersede default option.\n   *                Object must then have sql property.\n   * @param values  object / array of placeholder values (not mandatory)\n   * @param callback callback\n   */\n  batch(sql, values, callback) {\n    const cmdParam = ConnectionCallback._PARAM(this.#conn.opts, sql, values, callback);\n    return ConnectionCallback._BATCH_CMD(this.#conn, cmdParam);\n  }\n\n  static _BATCH_CMD(conn, cmdParam) {\n    conn\n      .batch(cmdParam)\n      .then((res) => {\n        if (cmdParam.callback) cmdParam.callback(null, res);\n      })\n      .catch((err) => {\n        if (cmdParam.callback) cmdParam.callback(err);\n      });\n  }\n\n  /**\n   * Send an empty MySQL packet to ensure connection is active, and reset @@wait_timeout\n   * @param timeout (optional) timeout value in ms. If reached, throw error and close connection\n   * @param callback callback\n   */\n  ping(timeout, callback) {\n    let _cmdOpt = {},\n      _cb;\n    if (typeof timeout === 'function') {\n      _cb = timeout;\n    } else {\n      _cmdOpt.timeout = timeout;\n      _cb = callback;\n    }\n    const cmdParam = new CommandParameter(null, null, _cmdOpt, _cb);\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    new Promise(this.#conn.ping.bind(this.#conn, cmdParam)).then(_cb || this.#noop).catch(_cb || this.#noop);\n  }\n\n  /**\n   * Send a reset command that will\n   * - rollback any open transaction\n   * - reset transaction isolation level\n   * - reset session variables\n   * - delete user variables\n   * - remove temporary tables\n   * - remove all PREPARE statement\n   *\n   * @param callback callback\n   */\n  reset(callback) {\n    const cmdParam = new CommandParameter();\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    return new Promise(this.#conn.reset.bind(this.#conn, cmdParam))\n      .then(callback || this.#noop)\n      .catch(callback || this.#noop);\n  }\n\n  /**\n   * Indicates the state of the connection as the driver knows it\n   * @returns {boolean}\n   */\n  isValid() {\n    return this.#conn.isValid();\n  }\n\n  /**\n   * Terminate connection gracefully.\n   *\n   * @param callback callback\n   */\n  end(callback) {\n    const cmdParam = new CommandParameter();\n    if (this.#conn.opts.trace) Error.captureStackTrace(cmdParam);\n    new Promise(this.#conn.end.bind(this.#conn, cmdParam))\n      .then(() => {\n        if (callback) callback();\n      })\n      .catch(callback || this.#noop);\n  }\n\n  /**\n   * Alias for destroy.\n   */\n  close() {\n    this.destroy();\n  }\n\n  /**\n   * Force connection termination by closing the underlying socket and killing server process if any.\n   */\n  destroy() {\n    this.#conn.destroy();\n  }\n\n  pause() {\n    this.#conn.pause();\n  }\n\n  resume() {\n    this.#conn.resume();\n  }\n\n  format(sql, values) {\n    this.#conn.format(sql, values);\n  }\n\n  /**\n   * return current connected server version information.\n   *\n   * @returns {*}\n   */\n  serverVersion() {\n    return this.#conn.serverVersion();\n  }\n\n  /**\n   * Change option \"debug\" during connection.\n   * @param val   debug value\n   */\n  debug(val) {\n    return this.#conn.debug(val);\n  }\n\n  debugCompress(val) {\n    return this.#conn.debugCompress(val);\n  }\n\n  escape(val) {\n    return this.#conn.escape(val);\n  }\n\n  escapeId(val) {\n    return this.#conn.escapeId(val);\n  }\n\n  //*****************************************************************\n  // internal public testing methods\n  //*****************************************************************\n\n  get __tests() {\n    return this.#conn.__tests;\n  }\n\n  connect(callback) {\n    if (!callback) {\n      throw new Errors.createError(\n        'missing mandatory callback parameter',\n        Errors.ER_MISSING_PARAMETER,\n        this.#conn.info\n      );\n    }\n    switch (this.#conn.status) {\n      case Status.NOT_CONNECTED:\n      case Status.CONNECTING:\n      case Status.AUTHENTICATING:\n      case Status.INIT_CMD:\n        this.once('connect', callback);\n        break;\n      case Status.CONNECTED:\n        callback.call(this);\n        break;\n      case Status.CLOSING:\n      case Status.CLOSED:\n        callback.call(\n          this,\n          Errors.createError(\n            'Connection closed',\n            Errors.ER_CONNECTION_ALREADY_CLOSED,\n            this.#conn.info,\n            '08S01',\n            null,\n            true\n          )\n        );\n        break;\n    }\n  }\n}\n\nmodule.exports = ConnectionCallback;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}